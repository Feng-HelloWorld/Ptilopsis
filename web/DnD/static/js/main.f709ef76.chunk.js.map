{"version":3,"sources":["pages/Login/Login.js","pages/Equipment/EquipmentEdit.js","pages/Equipment/Equipment.js","pages/Identity/IdentityEdit.js","pages/Identity/Identity.js","pages/Magic/MagicEdit.js","pages/Magic/Magic.js","App.js","index.js"],"names":["Login","props","loginP","useState","cardid","setCardid","pw","setPw","justify","orientation","className","placeholder","prefix","UserOutlined","maxLength","onChange","e","target","value","Password","KeyOutlined","type","shape","icon","LoginOutlined","size","onClick","console","log","axios","post","password","then","response","data","token","jwt_decode","name","player","permission","TextArea","Input","EquipmentChange","isModalVisible","setIsModalVisible","title","setTitle","description","setDesc","id","footer","delete","refresh","danger","length","put","battleid","SettingOutlined","event","stopPropagation","disabled","bordered","visible","destroyOnClose","maskClosable","closable","showCount","EquipmentAdd","PlusOutlined","hidden","Title","Typography","Panel","Collapse","Equipment","location","state","setData","get","result","localStorage","setItem","JSON","stringify","useEffect","localData","parse","getItem","align","style","display","level","RedoOutlined","map","item","index","header","extra","IdentityChange","counter","IdentityAdd","Identity","Option","Select","levelSelects","MagicChange","timecost","setTimecost","concentrate","setConcentrate","setLevel","cnname","defaultValue","String","width","autoSize","minRows","maxRows","checkedChildren","unCheckedChildren","defaultChecked","checked","MagicAdd","Text","Magic","loadData","raw_data","temp","i","push","ghost","itemClass","strong","italic","Header","Layout","Content","Footer","Sider","App","status","setStatus","setToken","setName","setPlayer","setPermission","defaultNav","setDefaultNav","loginProcess","document","defaults","baseURL","headers","common","savedToken","autoLogin","removeItem","minHeight","breakpoint","collapsedWidth","onBreakpoint","broken","onCollapse","collapsed","src","alt","theme","mode","defaultSelectedKeys","Item","to","pathname","SkinOutlined","ReadOutlined","padding","LogoutOutlined","window","href","margin","path","component","textAlign","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.f709ef76.chunk.js","sourcesContent":["import React, {useState} from 'react'\nimport axios from 'axios'\nimport jwt_decode from 'jwt-decode'\n\nimport { Input, Row, Col, Divider, Button } from 'antd';\nimport { UserOutlined, KeyOutlined, LoginOutlined } from '@ant-design/icons';\n\nimport './Login.css'\n\nexport const Login = (props) => {\n\n    const loginP = props.loginP\n\n    const [cardid, setCardid] = useState(0)\n    const [pw, setPw] = useState('')\n\n    const changeId = (e) => {\n        setCardid(e.target.value)\n    }\n\n    const changePw = (e) => {\n        setPw(e.target.value)\n    }\n\n    const loginButt = () => {\n        console.log('正在尝试登录,发送数据', cardid, pw)\n        axios.post('/card/login',{cardid:cardid,password:pw}).then(\n            (response) => {\n                console.log(\"Response\",response.data);\n                const token = response.data.data\n                const { cardid, name, player, permission } = jwt_decode(token)\n                loginP(token, cardid, name, player, permission)\n                console.log(\"数据已保存\", cardid, name, player, permission, token)\n            }\n        )\n    }\n\n    return (\n        <Row justify=\"center\">\n            <Col>\n                    <Divider orientation=\"left\">登录</Divider>\n\n                    <Input className='loginCompolent' placeholder=\"输入人物卡ID\" prefix={<UserOutlined />} maxLength='10' onChange={changeId}/>\n                \n                    <Input.Password className='loginCompolent' placeholder=\"输入密码\" prefix={<KeyOutlined />} maxLength='10' onChange={changePw}/> \n\n                    <Button className='loginCompolent' type=\"primary\" shape=\"round\" icon={<LoginOutlined />} size='default' onClick={loginButt}>登录</Button>\n            </Col>\n        </Row>\n\n    );\n}\n\nexport default Login;","import React, { useState } from 'react';\nimport { Modal, Input, Button } from 'antd';\n\nimport { PlusOutlined, SettingOutlined } from '@ant-design/icons';\nimport axios from 'axios';\n\nconst { TextArea } = Input;\n\nexport const EquipmentAdd = (props) => {\n    const [isModalVisible, setIsModalVisible] = useState(false);\n\n    const [title, setTitle] = useState('')\n    const [description, setDesc] = useState('')\n\n    const cardid = props.cardid\n\n    const changeTitle = (e) => {\n        setTitle(e.target.value)\n    }\n\n    const changeDesc = (e) => {\n        setDesc(e.target.value)\n    }\n\n    const showModal = () => {\n      setIsModalVisible(true);\n    };\n  \n    const submit = () => {\n        if(title.length>0 & description.length>0){\n            axios.post('/equipment/',{name:title,description:description,cardid:cardid,battleid:1}).then(\n                (response) => {\n                    console.log(\"Response\",response.data)\n                    props.refresh()\n                }\n            )\n            setIsModalVisible(false);\n        }\n        else{\n            console.log('Invalid input')\n        }\n    };\n  \n    const cancel = () => {\n        console.log('放弃编辑')\n      setIsModalVisible(false);\n    };\n\n    const footer = (\n        <>\n            <Button onClick={cancel}>取消</Button>\n            <Button type='primary' onClick={submit}>提交</Button>\n        </>\n    )\n\n  return (\n    <>\n      <Button type=\"default\" shape=\"circle\" icon={<PlusOutlined />} size='small' onClick={showModal} hidden={!props.permission}/>\n      <Modal title={<Input placeholder='物品名称' bordered={false} onChange={changeTitle}/>} visible={isModalVisible} destroyOnClose={true} footer={footer} maskClosable={false} closable={false}>\n        <TextArea showCount maxLength={1500} placeholder='物品描述，不超过1500字符' bordered={false} onChange={changeDesc} />\n      </Modal>\n    </>\n  );\n};\n\n\nexport const EquipmentChange = (props) => {\n\n    const [isModalVisible, setIsModalVisible] = useState(false);\n    const [title, setTitle] = useState(props.title)\n    const [description, setDesc] = useState(props.description)\n    const id = props.id\n    const cardid = props.cardid\n    const changeTitle = (e) => {\n        setTitle(e.target.value)\n    }\n\n    const changeDesc = (e) => {\n        setDesc(e.target.value)\n    }\n\n    const showModal = () => {\n        setIsModalVisible(true);\n    };\n  \n    const submit = () => {\n        if(title.length>0 & description.length>0){\n            axios.put('/equipment/'+id,{name:title,description:description,cardid:cardid,battleid:1}).then(\n                (response) => {\n                    console.log(\"Response\",response.data)\n                    props.refresh()\n                }\n            )\n            setIsModalVisible(false);\n        }\n        else{\n            console.log('Invalid input')\n        }\n    };\n\n    const remove = () => {\n        axios.delete('/equipment/'+id).then(\n            (response) => {\n                console.log(\"Response\",response.data)\n                props.refresh()\n            }\n        )\n        setIsModalVisible(false);\n    };\n  \n    const cancel = () => {\n        console.log('放弃编辑')\n      setIsModalVisible(false);\n    };\n\n    const footer = (\n        <>\n            <Button type='primary' onClick={remove} danger>删除</Button>\n            <Button onClick={cancel}>取消</Button>\n            <Button type='primary' onClick={submit}>提交</Button>\n        </>\n    )\n\n  return (\n    <>\n        <SettingOutlined\n            onClick={(event) => {\n            event.stopPropagation()\n            showModal()\n            }}\n            disabled={!props.permission}\n        />\n        <Modal title={<Input value={title} bordered={false} onChange={changeTitle}/>} visible={isModalVisible} destroyOnClose={true} footer={footer} maskClosable={false} closable={false}>\n        <TextArea showCount maxLength={1500} value={description} bordered={false} onChange={changeDesc} />\n      </Modal>\n    </>\n  );\n};\n\n\n\nexport default EquipmentAdd;","import React, {useState, useEffect} from 'react'\nimport axios from 'axios'\n\nimport './Equipment.css'\nimport EquipmentAdd, {EquipmentChange} from './EquipmentEdit'\n\nimport { Collapse, Divider, Space, Button, Typography } from 'antd';\nimport { RedoOutlined } from '@ant-design/icons';\nconst { Title } = Typography;\nconst { Panel } = Collapse;\n\nexport const Equipment = (props) => {\n\n    const cardid = props.location.state.cardid\n    const permission = props.location.state.permission\n    const [data, setData] = useState([])\n\n    const refresh = () => {\n        console.log('正在从服务器下载数据')\n        axios.get('/equipment/bycardid/'+cardid).then(\n            (response) => {\n                console.log(\"Response\",response.data.data.result);\n                setData(response.data.data.result)\n                console.log('数据下载完成',response.data.data.result)\n                localStorage.setItem('card'+cardid+'equipment',JSON.stringify(response.data.data.result))\n                console.log('已缓存至本地存储')\n            }\n        )\n    }\n\n\n    useEffect(() => {\n        console.log(\"装备模块开始载入，人物卡id为\",)\n        const localData = JSON.parse(localStorage.getItem('card'+cardid+'equipment'))\n        console.log('检查本地缓存',localData)\n        if(!localData){\n            refresh()\n        }\n        else{\n            setData(localData)\n            console.log('已使用本地缓存数据',data)\n        }\n        return () => {\n            console.log('装备模块退出')\n        }\n    }, [])\n\n    return (\n        <>\n            {console.log(\"开始使用数据渲染页面\",data)}\n            <Divider orientation=\"left\">\n                <Space size='large' align='baseline'>\n                    <Title style={{display:'inline-block'}} level={3}>装备</Title> \n                    <Space>\n                    <EquipmentAdd cardid={cardid} refresh={refresh} permission={permission}/>\n                    <Button type=\"default\" shape=\"circle\" icon={<RedoOutlined />} size='small' onClick={refresh}/>\n                    </Space>\n                </Space>\n            </Divider>\n            <Collapse>\n            {\n                data.map(\n                    (item, index) => {\n                    return (<Panel header={item.name} key={item.id} extra={permission? <EquipmentChange title={item.name} id={item.id} cardid={cardid} description={item.description} refresh={refresh} onClick={\n                        (event) => {event.stopPropagation();}\n                    }/> : ''\n                        \n                    }>\n                        <div className='equipmentDescription'>\n                            {\n                                item.description\n                            }\n                        </div>\n                    </Panel>)\n                    }\n                )\n            }\n            </Collapse>\n        </>\n\n\n    )\n}\n\n\nexport default Equipment;","import React, { useState } from 'react';\nimport { Modal, Input, Button } from 'antd';\n\nimport { PlusOutlined, SettingOutlined } from '@ant-design/icons';\nimport axios from 'axios';\n\nconst { TextArea } = Input;\n\nexport const IdentityAdd = (props) => {\n    const [isModalVisible, setIsModalVisible] = useState(false);\n\n    const [title, setTitle] = useState('')\n    const [description, setDesc] = useState('')\n    const [counter, setCounter] = useState('')\n\n    const cardid = props.cardid\n\n    const changeTitle = (e) => {\n        setTitle(e.target.value)\n    }\n\n    const changeDesc = (e) => {\n        setDesc(e.target.value)\n    }\n\n    const changeCounter = (e) => {\n        setCounter(e.target.value)\n    }\n\n    const showModal = () => {\n      setIsModalVisible(true);\n    };\n  \n    const submit = () => {\n        if(title.length>0 & description.length>0){\n            axios.post('/identity/',{name:title,description:description,cardid:cardid,counter:counter}).then(\n                (response) => {\n                    console.log(\"Response\",response.data)\n                    props.refresh()\n                }\n            )\n            setIsModalVisible(false);\n        }\n        else{\n            console.log('Invalid input')\n        }\n    };\n  \n    const cancel = () => {\n        console.log('放弃编辑')\n      setIsModalVisible(false);\n    };\n\n    const footer = (\n        <>\n            <Button onClick={cancel}>取消</Button>\n            <Button type='primary' onClick={submit}>提交</Button>\n        </>\n    )\n\n  return (\n    <>\n      <Button type=\"default\" shape=\"circle\" icon={<PlusOutlined />} size='small' onClick={showModal} hidden={!props.permission}/>\n      <Modal title={<Input placeholder='特质名称' bordered={false} onChange={changeTitle}/>} visible={isModalVisible} destroyOnClose={true} footer={footer} maskClosable={false} closable={false}>\n        <TextArea showCount maxLength={1500} placeholder='特质描述，不超过1500字符' bordered={false} onChange={changeDesc} />\n        \n      </Modal>\n    </>\n  );\n};\n\nexport const IdentityChange = (props) => {\n\n    const [isModalVisible, setIsModalVisible] = useState(false);\n    const [title, setTitle] = useState(props.title)\n    const [description, setDesc] = useState(props.description)\n    const [counter, setCounter] = useState('')\n\n    const id = props.id\n    const cardid = props.cardid\n    const changeTitle = (e) => {\n        setTitle(e.target.value)\n    }\n\n    const changeDesc = (e) => {\n        setDesc(e.target.value)\n    }\n\n    const changeCounter = (e) => {\n        setCounter(e.target.value)\n    }\n\n    const showModal = () => {\n        setIsModalVisible(true);\n    };\n  \n    const submit = () => {\n        if(title.length>0 & description.length>0){\n            axios.put('/identity/'+id,{name:title,description:description,cardid:cardid,counter:counter}).then(\n                (response) => {\n                    console.log(\"Response\",response.data)\n                    props.refresh()\n                }\n            )\n            setIsModalVisible(false);\n        }\n        else{\n            console.log('Invalid input')\n        }\n    };\n\n    const remove = () => {\n        axios.delete('/identity/'+id).then(\n            (response) => {\n                console.log(\"Response\",response.data)\n                props.refresh()\n            }\n        )\n        setIsModalVisible(false);\n    };\n  \n    const cancel = () => {\n        console.log('放弃编辑')\n      setIsModalVisible(false);\n    };\n\n    const footer = (\n        <>\n            <Button type='primary' onClick={remove} danger>删除</Button>\n            <Button onClick={cancel}>取消</Button>\n            <Button type='primary' onClick={submit}>提交</Button>\n        </>\n    )\n\n  return (\n    <>\n        <SettingOutlined\n            onClick={(event) => {\n            event.stopPropagation()\n            showModal()\n            }}\n            disabled={!props.permission}\n        />\n        <Modal title={<Input value={title} bordered={false} onChange={changeTitle}/>} visible={isModalVisible} destroyOnClose={true} footer={footer} maskClosable={false} closable={false}>\n        <TextArea showCount maxLength={1500} value={description} bordered={false} onChange={changeDesc} />\n      </Modal>\n    </>\n  );\n};\n\nexport default IdentityAdd;","import React, {useState, useEffect} from 'react'\nimport axios from 'axios'\n\nimport './Identity.css'\nimport IdentityAdd, {IdentityChange} from './IdentityEdit'\n\nimport { Collapse, Divider, Space, Button, Typography } from 'antd';\nimport { RedoOutlined } from '@ant-design/icons';\nconst { Title } = Typography;\nconst { Panel } = Collapse;\n\nexport const Identity = (props) => {\n\n    const cardid = props.location.state.cardid\n    const permission = props.location.state.permission\n    const [data, setData] = useState([])\n\n    const refresh = () => {\n        console.log('正在从服务器下载数据')\n        axios.get('/identity/bycardid/'+cardid).then(\n            (response) => {\n              console.log(\"Response\",response.data.data.result);\n              setData(response.data.data.result)\n              console.log('数据下载完成',response.data.data.result)\n              localStorage.setItem('card'+cardid+'identity',JSON.stringify(response.data.data.result))\n              console.log('已缓存至本地存储')\n            }\n        )\n    }\n\n  useEffect(() => {\n    console.log(\"特质模块开始载入，人物卡id为\",)\n    const localData = JSON.parse(localStorage.getItem('card'+cardid+'identity'))\n    console.log('检查本地缓存',localData)\n    if(!localData){\n        refresh()\n    }\n    else{\n        setData(localData)\n        console.log('已使用本地缓存数据',data)\n    }\n    return () => {\n        console.log('特质模块退出')\n    }\n}, [])\n\n  return (\n    <>\n      {console.log(\"开始使用数据渲染页面\",data)}\n      <Divider orientation=\"left\">\n          <Space size='large' align='baseline'>\n              <Title style={{display:'inline-block'}} level={3}>特质</Title> \n              <Space>\n              <IdentityAdd cardid={cardid} refresh={refresh} permission={permission}/>\n              <Button type=\"default\" shape=\"circle\" icon={<RedoOutlined />} size='small' onClick={refresh}/>\n              </Space>\n          </Space>\n      </Divider>\n      <Collapse>\n      {\n          data.map(\n              (item, index) => {\n              return (<Panel header={item.name} key={item.id} extra={permission? <IdentityChange title={item.name} id={item.id} cardid={cardid} description={item.description} refresh={refresh} onClick={\n                  (event) => {event.stopPropagation();}\n                }/> : ''    \n              }>\n                  <div className='identityDescription'>\n                      {\n                          item.description\n                      }\n                  </div>\n              </Panel>)\n              }\n          )\n      }\n      </Collapse>\n  </>\n  )\n}\n\n\nexport default Identity;","import React, { useState } from 'react';\nimport { Modal, Input, Button, Select, Space, Switch } from 'antd';\n\nimport { PlusOutlined, SettingOutlined } from '@ant-design/icons';\nimport axios from 'axios';\n\nconst { TextArea } = Input;\nconst { Option } = Select;\n\n//下拉菜单列表\nconst levelSelects = (\n    <>\n        <Option value=\"0\">戏法</Option>\n        <Option value=\"1\">1环</Option>\n        <Option value=\"2\">2环</Option>\n        <Option value=\"3\">3环</Option>\n        <Option value=\"4\">4环</Option>\n        <Option value=\"5\">5环</Option>\n        <Option value=\"6\">6环</Option>\n        <Option value=\"7\">7环</Option>\n        <Option value=\"8\">8环</Option>\n        <Option value=\"9\">9环</Option>\n    </>\n)\n\nexport const MagicAdd = (props) => {\n\n    const [isModalVisible, setIsModalVisible] = useState(false);\n    const [title, setTitle] = useState('')\n    const [description, setDesc] = useState('')\n    const [timecost, setTimecost] = useState('')\n    const [concentrate, setConcentrate] = useState(false)\n    const [level, setLevel] = useState(0)\n\n    const changeTitle = (e) => {\n        setTitle(e.target.value)\n    }\n\n    const changeDesc = (e) => {\n        setDesc(e.target.value)\n    }\n\n    const changeTimecost = (e) => {\n        setTimecost(e.target.value)\n    }\n\n    const changeConcentrate = (value) => {\n        value? setConcentrate(1) : setConcentrate(0)\n    }\n\n    const changeLevel = (value) => {\n        setLevel(value)\n    }\n\n    const cardid = props.cardid\n\n    const showModal = () => {\n        setIsModalVisible(true);\n    };\n\n    const submit = () => {\n        if(title.length>0 & description.length>0 & timecost.length>0){\n            axios.post('/magic/',{cnname:title,description:description,cardid:cardid,timecost:timecost,concentrate:concentrate,level:level}).then(\n                (response) => {\n                    console.log(\"Response\",response.data)\n                    props.refresh()\n                }\n            )\n            setIsModalVisible(false);\n        }\n        else{\n            console.log('Invalid input')\n        }\n    };\n\n    const cancel = () => {\n        console.log('放弃编辑')\n        setIsModalVisible(false);\n    };\n\n    const footer = (\n        <>\n            <Button onClick={cancel}>取消</Button>\n            <Button type='primary' onClick={submit}>提交</Button>\n        </>\n    )\n\n    return (\n        <>\n            <Button type=\"default\" shape=\"circle\" icon={<PlusOutlined />} size='small' onClick={showModal} hidden={!props.permission}/>\n            <Modal title={<Space>\n                <Select defaultValue='0' style={{width:80,display:'inline-block'}} onChange={changeLevel}>\n                    {levelSelects}\n                </Select>\n                <Input placeholder='法术名称' bordered={false} style={{display:'inline-block'}} onChange={changeTitle}/>\n            </Space>} visible={isModalVisible} destroyOnClose={true} footer={footer} maskClosable={false} closable={false}>\n\n                <TextArea showCount maxLength={1500} placeholder='法术效果，不超过1500字符' bordered={false} onChange={changeDesc} autoSize={{ minRows: 6, maxRows: 10 }}/>\n                <Space>\n                    <Switch checkedChildren=\"需要专注\" unCheckedChildren=\"无需专注\" defaultChecked style={{display:'inline-block'}} onChange={changeConcentrate} checked={concentrate}/>\n                    <Input placeholder=\"施法时间\" bordered={false} style={{display:'inline-block'}} onChange={changeTimecost} />\n                </Space>  \n            </Modal>\n        </>\n      );\n\n}\n\nexport const MagicChange = (props) => {\n\n    const [isModalVisible, setIsModalVisible] = useState(false);\n    const [title, setTitle] = useState(props.title)\n    const [description, setDesc] = useState(props.description)\n    const [timecost, setTimecost] = useState(props.timecost)\n    const [concentrate, setConcentrate] = useState(props.concentrate)\n    const [level, setLevel] = useState(props.level)\n\n    const changeTitle = (e) => {\n        setTitle(e.target.value)\n    }\n\n    const changeDesc = (e) => {\n        setDesc(e.target.value)\n    }\n\n    const changeTimecost = (e) => {\n        setTimecost(e.target.value)\n    }\n\n    const changeConcentrate = (value) => {\n        value? setConcentrate(1) : setConcentrate(0)\n    }\n\n    const changeLevel = (value) => {\n        setLevel(value)\n    }\n\n    const id = props.id\n    const cardid = props.cardid\n\n    const showModal = () => {\n        setIsModalVisible(true);\n    };\n\n    const submit = () => {\n        if(title.length>0 & description.length>0 & timecost.length>0){\n            axios.put('/magic/',{cnname:title,description:description,cardid:cardid,timecost:timecost,concentrate:concentrate,level:level}).then(\n                (response) => {\n                    console.log(\"Response\",response.data)\n                    props.refresh()\n                }\n            )\n            setIsModalVisible(false);\n        }\n        else{\n            console.log('Invalid input')\n        }\n    };\n\n    const remove = () => {\n        axios.delete('/magic/'+id).then(\n            (response) => {\n                console.log(\"Response\",response.data)\n                props.refresh()\n            }\n        )\n        setIsModalVisible(false);\n    };\n\n    const cancel = () => {\n        console.log('放弃编辑')\n        setIsModalVisible(false);\n    };\n\n    const footer = (\n        <>\n            <Button type='primary' onClick={remove} danger>删除</Button>\n            <Button onClick={cancel}>取消</Button>\n            <Button type='primary' onClick={submit}>提交</Button>\n        </>\n    )\n\n    return (\n        <>\n            <SettingOutlined\n                onClick={(event) => {\n                event.stopPropagation()\n                showModal()\n                }}\n                disabled={!props.permission}\n            />\n            <Modal title={<Space>\n                <Select defaultValue={String(level)} style={{width:80,display:'inline-block'}} onChange={changeLevel}>\n                    {levelSelects}\n                </Select>\n                <Input value={title} bordered={false} style={{display:'inline-block'}} onChange={changeTitle}/>\n            </Space>} visible={isModalVisible} destroyOnClose={true} footer={footer} maskClosable={false} closable={false}>\n\n                <TextArea showCount maxLength={1500} value={description} bordered={false} onChange={changeDesc} autoSize={{ minRows: 6, maxRows: 10 }}/>\n                <Space>\n                    <Switch checkedChildren=\"需要专注\" unCheckedChildren=\"无需专注\" defaultChecked style={{display:'inline-block'}} onChange={changeConcentrate} checked={concentrate}/>\n                    <Input value={timecost} bordered={false} style={{display:'inline-block'}} onChange={changeTimecost} />\n                </Space>  \n            </Modal>\n        </>\n      );\n}\n\nexport default MagicAdd;","import React, {useState, useEffect} from 'react'\nimport axios from 'axios'\n\nimport './Magic.css'\nimport MagicAdd, {MagicChange} from './MagicEdit'\n\nimport { Collapse, Divider, Space, Button, Typography } from 'antd';\nimport { RedoOutlined } from '@ant-design/icons';\nconst { Title, Text } = Typography;\nconst { Panel } = Collapse;\n\nexport const Magic = (props) => {\n\n    const cardid = props.location.state.cardid\n    const permission = props.location.state.permission\n    const [data, setData] = useState([])\n\n    //分类处理数据库传来的数据\n    const loadData = (raw_data) => {\n        var temp = []\n        for(var i = 0; i<10; i++){\n            temp[i] = []\n        }\n        raw_data.map(\n            (item) => {\n                temp[item.level].push(item)\n                return true\n            }\n        )\n        setData(temp)\n    }\n\n    const refresh = () => {\n        console.log('正在从服务器下载数据')\n        axios.get('/magic/bycardid/'+cardid).then(\n            (response) => {\n              console.log(\"Response\",response.data.data.result);\n              loadData(response.data.data.result)\n              console.log('数据下载完成',response.data.data.result)\n              localStorage.setItem('card'+cardid+'magic',JSON.stringify(response.data.data.result))\n              console.log('已缓存至本地存储')\n            }\n        )\n    }\n\n    useEffect(() => {\n        console.log(\"法术模块开始载入，人物卡id为\",)\n        const localData = JSON.parse(localStorage.getItem('card'+cardid+'magic'))\n        console.log('检查本地缓存',localData)\n        if(!localData){\n            refresh()\n        }\n        else{\n            loadData(localData)\n            console.log('已使用本地缓存数据',data)\n        }\n        return () => {\n            console.log('法术模块退出')\n        }\n    }, [])\n\n    return (\n        <>\n            {console.log(\"开始使用数据渲染页面\",data)}\n\n            <Divider orientation=\"left\">\n                <Space size='large' align='baseline'>\n                    <Title style={{display:'inline-block'}} level={3}>法术列表</Title> \n                    <Space>\n                    <MagicAdd cardid={cardid} refresh={refresh} permission={permission}/>\n                    <Button type=\"default\" shape=\"circle\" icon={<RedoOutlined />} size='small' onClick={refresh}/>\n                    </Space>\n                </Space>\n            </Divider>\n\n            <Collapse ghost={true}>\n                {\n                    data.map(\n                        (itemClass, index)=>{\n                            if(itemClass.length>0){\n                                return <Panel header={<Title level={5} style={{display:'inline-block'}}>{itemClass[0]['level']? index+'环' : '戏法'}</Title> } key={index} >\n                                    <Collapse>\n                                        {\n                                        itemClass.map(\n                                                (item, index) => {\n                                                return (\n                                                    <Panel header={<Space>\n                                                            <Text strong={true}>{item.cnname}</Text>\n                                                            <Text type=\"secondary\" italic={true}>{item.timecost}</Text>\n                                                            <Text type=\"secondary\" italic={true}>{item.concentrate?'专注':\"\"}</Text>\n                                                        </Space>} key={item.id} extra={permission? <MagicChange \n                                                            title={item.cnname} \n                                                            id={item.id} \n                                                            cardid={cardid} \n                                                            description={item.description} \n                                                            level={item.level}\n                                                            timecost={item.timecost}\n                                                            concentrate={item.concentrate}\n                                                            refresh={refresh} \n                                                            onClick={\n                                                                (event) => {event.stopPropagation();}\n                                                            }/> : ''\n                                                        }>\n                                                        <div className='magicDescription'>\n                                                            {\n                                                                item.description\n                                                            }\n                                                        </div>\n                                                    </Panel>)\n                                                }\n                                            )\n                                        }\n                                        </Collapse>\n                                </Panel>\n                            }\n                            return null\n                        }\n                    )\n                }\n            </Collapse>\n        </>\n      )\n}\n\nexport default Magic;","import './App.css';\nimport { Link, Route, Redirect } from 'react-router-dom'\nimport { Layout, Menu, Button, Space } from 'antd'\nimport { LoginOutlined, LogoutOutlined, SkinOutlined, ReadOutlined, UserOutlined } from '@ant-design/icons'\nimport axios from 'axios'\nimport jwt_decode from 'jwt-decode'\n\nimport Login from './pages/Login/Login'\nimport Equipment from './pages/Equipment/Equipment'\nimport Identity from './pages/Identity/Identity'\nimport Magic from './pages/Magic/Magic'\nimport { useState, useEffect } from 'react';\n\nconst { Header, Content, Footer, Sider } = Layout\n\n//退出浏览器时自动清除缓存\n// window.onunload = () =>{\n//   localStorage.clear()\n// }\n\nfunction App() {\n\n  const [status, setStatus] = useState(false)\n  const [token, setToken] = useState('')\n  const [cardid, setCardid] = useState('')\n  const [name, setName] = useState('DnD在线人物卡系统')\n  const [player, setPlayer] = useState('')\n  const [permission, setPermission] = useState(false)\n  const [defaultNav, setDefaultNav] = useState(['1'])\n\n  const loginProcess = (token, cardid, name, player, permission) => {\n    setStatus(true)\n    setToken(token)\n    setCardid(cardid)\n    setName(name)\n    setPlayer(player)\n    setDefaultNav(['2'])\n    if(permission==='full'){\n      setPermission(true)\n      localStorage.setItem('token',token)\n    }\n  }\n\n  document.title=name\n  // axios.defaults.baseURL = 'http://localhost:3003/api/v1/dnd';\n  axios.defaults.baseURL = 'https://hz.shirolovol.cn:3003/api/v1/dnd';\n  axios.defaults.headers.common['Authorization'] = \"Bearer \"+token;\n\n  const logout = () => {\n    localStorage.removeItem('token')\n    localStorage.removeItem('card'+cardid+'equipment')\n    localStorage.removeItem('card'+cardid+'identity')\n    localStorage.removeItem('card'+cardid+'magic')\n    // localStorage.removeItem('card'+cardid+'')\n\n    // localStorage.removeItem('card'+cardid+'')\n\n    // window.location.href=\"http://localhost:3000\"\n    window.location.href=\"https://hz.shirolovol.cn:3002\"\n  }\n\n  const autoLogin = () => {\n    const savedToken = localStorage.getItem('token')\n    if(savedToken){\n      axios.defaults.headers.common['Authorization'] = \"Bearer \"+savedToken;\n      axios.post('card/tokenlogin').then(\n        (response) => {\n          console.log(\"Response\",response.data);\n          const token = response.data.data\n          const { cardid, name, player, permission } = jwt_decode(token)\n          loginProcess(token, cardid, name, player, permission)\n          console.log(\"数据已保存\", cardid, name, player, permission, token)\n        }\n      )\n    }\n  }\n\n  const Welcome = () => {\n    return (\n      <>Welcome {player}</>\n    )\n  }\n\n  useEffect(\n    () => {\n      autoLogin()\n      return (\n        () => {\n          localStorage.removeItem('card'+cardid+'equipment')\n        }\n      )\n    },[]\n  )\n  \n\n  return (\n    <div className=\"App\">\n      <Layout style={{minHeight:\"100vh\"}}>\n        <Sider\n          breakpoint=\"lg\"\n          collapsedWidth=\"0\"\n          onBreakpoint={broken => {\n            console.log(broken);\n          }}\n          onCollapse={(collapsed, type) => {\n            console.log(collapsed, type);\n          }}\n        >\n          <img className='ptilopsisLogo' src='logo.png' alt='NotFount'/>\n          <Menu theme=\"dark\" mode=\"inline\" defaultSelectedKeys={defaultNav}>\n              \n              <Menu.Item key=\"1\" icon={<LoginOutlined />} hidden={status}>登录</Menu.Item>\n\n              <Menu.Item key=\"2\" icon={<UserOutlined />} hidden={!status}>\n                <Link to={{pathname:'identity',state:{cardid:cardid, permission:permission}}}>人物特质</Link>\n              </Menu.Item>\n\n              <Menu.Item key=\"3\" icon={<SkinOutlined />} hidden={!status}>\n                <Link to={{pathname:'equipment',state:{cardid:cardid, permission:permission}}}>装备及武器</Link>\n              </Menu.Item>\n\n              <Menu.Item key=\"4\" icon={<ReadOutlined />} hidden={!status}>\n                <Link to={{pathname:'magic',state:{cardid:cardid, permission:permission}}}>法术</Link>\n              </Menu.Item>\n            \n          </Menu>\n        </Sider>\n        <Layout>\n          <Header className=\"site-layout-sub-header-background\" style={{ padding: 0 }} >\n            <Space size='large' align='center'>\n              <div className='ptilopsisTitle'>{name}</div>\n              <Button size='small'  shape=\"circle\" icon={<LogoutOutlined/>} onClick={logout} hidden={!status}/>\n            </Space>\n          </Header>\n          <Content style={{ margin: '24px 16px 0' }}>\n            <div className=\"site-layout-background\" style={{ padding: 24, minHeight: 360 }}>\n              <div hidden={status}>\n                <Login loginP={loginProcess}/>\n              </div>\n              <Route path='/welcome' component={Welcome} />\n              <Route path='/identity' component={Identity} />\n              <Route path='/equipment' component={Equipment} />\n              <Route path='/magic' component={Magic} />\n              {status? <Redirect to='/welcome' />:<Redirect to='/' />}\n            </div>\n          </Content>\n          <Footer style={{ textAlign: 'center' }}>Ptilopsis DnD 在线人物卡管理系统</Footer>\n        </Layout>\n      </Layout>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom'\nimport './index.css';\nimport App from './App';\nimport 'antd/dist/antd.css'\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}