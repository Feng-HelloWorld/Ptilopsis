# Ptilopsis 帮助文档

## 快速指引
|基础|模块|小游戏|
|:-:|:-:|:-:|
|[管理指令](?id=管理指令)|[COC指令](?id=COC模块)|[五子棋](?id=五子棋)| 
|[每日签到](?id=每日签到)|[对战指令](?id=对战模块)|| 
||[Arcaea](?id=Arcaea查询)||
||[数学分析](?id=数学分析)||

------
## 近期更新


------

## 更新计划

此部分内容仅为大纲，实际效果请以正式版为准

- [x] 进行对战模块测试
- [ ] 完善对战模块的规则和文档
- [ ] 加入更多类型更复杂的自定义技能，例如回复类技能，生命吸取（大概），盗窃
- [ ] 加入货币系统
- [ ] 加入技能点和经验系统
- [ ] 将数据库从本地迁移到docker容器内

------

## 每日签到
在东八区凌晨4点至上午10点期间可以使用“签到”，“早”，“早安”，“早上好”来触发签到功能，每人每天仅限1次。


> 签到  
早  
早安  
早上好  

------

## COC模块

COC模块提供了COC网团的常用功能，进阶功能如人物卡记录与导入暂无开发计划（问就是懒）。

#### rd

使用指令“.rd”可以投掷一个百分骰；你也可以自定义骰子的数目和面数，具体格式为“.r”加上“骰子个数d骰子面数”；如果需要添加备注，请在指令结束后添加并用单个空格分开。

> .rd   
[投掷1个100面骰]  
.r2d   
[投掷2个100面骰]  
.rd6   
[投掷1个6面骰]  
.rd+3   
[投掷1个100面骰，加上3]  
.rd+d6   
[投掷1个100面骰，和1个6面骰]  
.rd 侦查   
[投掷1个备注为‘侦查’的100面骰]  

#### rhd（未实装）

使用指令“.rhd”可以投掷一个不公示的百分骰，结果将通过私聊发送；你也可以自定义骰子的数目和面数，具体格式为“.rh”加上“骰子个数d骰子面数”；如果需要添加备注，请在指令结束后添加并用单个空格分开。

> .rhd   
[悄悄投掷1个100面骰]  
.rh2d   
[悄悄投掷2个100面骰]  
.rhd6   
[悄悄投掷1个6面骰]  
.rhd+3   
[悄悄投掷1个100面骰，加上3]  
.rhd+d6   
[悄悄投掷1个100面骰，和1个6面骰]  
.rhd 侦查   
[悄悄投掷1个备注为‘侦查’的100面骰] 

#### ra（未实装）

使用指令“.ra 50”可以进行一次成功率为50的检定；你也可以添加奖励骰或惩罚骰，具体格式为“.ra”加上奖励骰或惩罚骰，加上空格，加上成功率；如果需要添加备注，请在指令结束后添加并用单个空格分开。

 
> .ra 50  
[进行一次成功率为50的检定]  
.ra+1 50  
[进行一次成功率为50的检定，并赋予1个奖励骰]  
.ra-2 50  
[进行一次成功率为50的检定，并赋予2个惩罚骰]  
.ra 50 侦查  
[进行一次成功率为50的侦查检定]

------


## 对战模块
你甚至可以在群里和群友玩一个小型的RPG游戏，基础规则部分源于COC，另一部分来源自各大养成类手游~~（万恶之源）~~。  
本指令集还在施工中，暂未实装。  

> .status

使用指令“.status”显示你当前的各项属性

> .skill

使用指令“.skill”列出你当前拥有的技能

> .rename Ptilopsis  

使用指令“.rename NAME”可以修改你当前的ID，~~修改需要消耗金币~~。

> .setskill/Att01/火球术/A01/ORI使用了无敌的火球术！/对TAR造成了DAM点伤害！/但是打歪了，没能对TAR造成伤害

使用指令“.setskill/技能模版代码/技能名称/技能位/技能效果描述/成功效果描述/失败效果描述”可以新建你的人物技能。~~新建人物技能需要消耗金币。~~

.setskill：指令前缀  
技能模版代码：用于选择你的技能，详细的代码代表的含义请参考[技能模版代码表](?id=技能模版代码表)。  
技能名称：这个技能的名称，同时会作为关键字进行匹配，所以尽量不要选择正常聊天时会用到的词作为关键字；你设置的关键字只会匹配你的指令。  
技能位：每个人有技能位数量限制，初始技能位3个，技能位数量会随等级提升而增加，也可以使用金币购买。  
技能效果描述：当你释放技能时，你希望显示的技能释放过程；其中占位符ORI（你的名字）TAR（目标的名字）DAM（伤害或治疗值）将被实际内容替换。  
成功效果描述：当技能释放成功时，你希望显示的描述性文本；其中占位符ORI（你的名字）TAR（目标的名字）DAM（伤害或治疗值）将被实际内容替换。  
失败效果描述：当技能释放失败时，你希望显示的描述性文本；其中占位符ORI（你的名字）TAR（目标的名字）DAM（伤害或治疗值）将被实际内容替换。  

> @NAME Explosion！大火球术！  

当你at某人，且附带文本中含有你之前设置过的技能关键词时，视为你消耗行动力对该目标释放了一次技能；注意，at必须放在文本之前，且复制的at将不会被识别。


------

#### 技能模版代码表

这里列出了当前支持的技能模版；数值部分格式为“初始值（成长值）最大值”，其中成长值为每一点技能点数所能带来的实际受益增加，如果没有标注最大值，视为无上限。  

假如一个行动点消耗数值是1(0.2)，这意味着这个技能初始消耗1点行动力，你每分配1点技能点在这个技能的检定值或伤害值上时，行动点消耗增加0.2；当计算行动点消耗时，舍弃小数位。

假如一个检定值数值是50(2d6)85，这意味着这个技能初始检定值为50，你每分配1点技能点在这一项上，能增加2d6的检定值，最大不超过85。有关检定值的作用，参见[技能检定值](?id=技能检定值与闪避)

假如一个伤害值的数值是1d6(2)，这意味着这个技能初始能造成1d6的伤害，你每分配1点技能点在这一项上，能增加2点伤害（可以理解为2d1），合计1d6+2点伤害，或1d3点伤害（计算公示如下），合计1d6+1d3点伤害。治疗量同理。  

成长值 = 骰子个数*(骰子面数+1)/2


|代码|描述|
|:-:|:-|
|Att01|此技能允许你消耗1(0.25)点行动力对目标发动一次检定值为50(2d6)85的可被闪避的攻击；若成功，造成2d6(4)点伤害|
|Cur01|此技能允许你消耗1(0.25)点行动力对目标发动一次检定值为50(2d6)85的治疗；若成功，恢复目标2d6(4)点血量|
|||

------

#### 技能检定值与闪避

技能的检定值与闪避和COC规则相似，你会先投掷一个百分骰（1d100），若出目小于或等于技能检定值，视为技能释放成功，若小于等于技能检定值的二分之一，视为困难成功，若小于技能检定值的五分之一，视为极难成功，否则视为此次攻击失败，根据技能效果你可能会受到失败惩罚；你的攻击如果可以闪避，则攻击目标也会投掷一个百分骰，其出目与目标的闪避值进行比较，得出一个成功等级。如果闪避的成功等级高于或等于攻击的成功等级，则视为此次攻击落空。不造成效果。

------

## 管理指令

> .bot on  
.bot off  

使用这两个指令可以打开/关闭白咕咕的总开关；关闭后白咕咕仍会监听群内消息，但不会对指令做出回应。此功能暂未实装。

------

## 五子棋

何不和群友来一场紧张刺激的五子棋对决呢？

#### 创建对局

发送指令“发起五子棋挑战”以创建对局，获取五位数房间号。

 
> 发起五子棋挑战  

#### 加入与退出

使用指令“加入00000”可以加入房间号为00000的对局；使用指令“退出房间”可以退出当前所在对局。同时只能创建或加入一场对局，同一个群可以同时存在多场对局。当一局游戏结束时，参与者将自动退出该房间，同时房间号失效。


> 加入12345  
退出房间  

#### 落子

棋盘使用平面直角坐标系格式，以中心点为零点，水平向右为x轴正方向，垂直向上为y轴正方向。使用指令“（0，0）”在棋盘中心位置落一颗棋子。全角括号和半角括号均可以使用，但一定要有。


> （1，2）  
[在x=1，y=2的地方落一颗子]  
(2,-3)  
[在x=2，y=-3的地方落一颗子]  

#### 其他功能

使用指令“查看00000”可以查看房间号为00000的对局棋盘。

  
> 查看00000

~~使用指令“悔棋”可以撤销自己上一步落的子（有次数限制）。（未实装）~~

~~使用指令“认输”可以投降，立刻结束本场对局。（未实装）~~

------

## Arcaea查询

使用指令“.recent123456789”可以查询ID为123456789的玩家最近游玩的一个谱面。

> .recent123456789  

------

## 数学分析

使用指令“直方图[1,2,3]”可以绘制以1，2，3为数据的直方图，具体指令格式为“直方图[”+需要绘制的数据（使用半角逗号分隔）+“]”


> 直方图[58, 3, 13, 70, 18, 7, 28, 88, 47, 78, 92, 99, 44, 20, 100, 14]  


